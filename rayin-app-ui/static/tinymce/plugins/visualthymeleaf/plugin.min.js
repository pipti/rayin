(function(){var e=function(r){var s=r;var q=function(){return s};var u=function(w){s=w};var t=function(){return e(q())};return{get:q,set:u,clone:t}};var d=tinymce.util.Tools.resolve("tinymce.PluginManager");var f=function(q,r){q.fire("VisualThymeleaf",{state:r})};var p={fireVisualBlocks:f};var i=function(r,q,s){var t=r.dom;t.toggleClass(r.getBody(),"mce-visualthymeleaf");s.set(!s.get());p.fireVisualBlocks(r,s.get())};var l={toggleVisualBlocks:i};var n=function(r,q,s){r.addCommand("mceVisualThymeleaf",function(){l.toggleVisualBlocks(r,q,s)})};var o={register:n};var h=function(q){return q.getParam("visualthymeleaf_default_state",true,"boolean")};var a={isEnabledByDefault:h};var g=function(r,q,s){r.on("PreviewFormats AfterPreviewFormats",function(t){if(s.get()){r.dom.toggleClass(r.getBody(),"mce-visualthymeleaf",t.type==="afterpreviewformats")}});r.on("init",function(){if(a.isEnabledByDefault(r)){l.toggleVisualBlocks(r,q,s)}});r.on("remove",function(){r.dom.removeClass(r.getBody(),"mce-visualthymeleaf")})};var m={setup:g};var k=function(q,r){return function(t){t.setActive(r.get());var s=function(u){return t.setActive(u.state)};q.on("VisualThymeleaf",s);return function(){return q.off("VisualThymeleaf",s)}}};var b=function(q,r){q.ui.registry.addToggleButton("visualthymeleaf",{icon:"code-sample",tooltip:"显示数据绑定标签",onAction:function(){return q.execCommand("mceVisualThymeleaf")},onSetup:k(q,r)});q.ui.registry.addToggleMenuItem("visualthymeleaf",{text:"显示数据绑定标签",onAction:function(){return q.execCommand("mceVisualThymeleaf")},onSetup:k(q,r)})};var c={register:b};function j(){d.add("visualthymeleaf",function(r,q){var s=e(false);o.register(r,q,s);c.register(r,s);m.setup(r,q,s)})}j()}());